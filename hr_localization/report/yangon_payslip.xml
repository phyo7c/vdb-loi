<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="hr_localization.report_ygn_payslip">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="hr_localization.report_header_ygn"/>
            <t t-call="web.basic_layout">
                <t t-set="o" t-value="o.with_context(lang=lang)" />
                
                <div class="page">
                    
                    <table class="table table-sm o_main_table">
                        
                        <tr>
                            <th rowspan="2" style="border: 1px solid black; width:400px;" >
                                <span t-field="o.employee_id.company_id.name" />
                                <div><span t-field="o.employee_id.company_id.street"/></div>
                                <div><span t-field="o.employee_id.company_id.street2" t-if="o.employee_id.company_id.street2"/></div>
                                <div>
                                    <span t-field="o.employee_id.company_id.city"/>
                                    <span t-field="o.employee_id.company_id.state_id"/>
                                    <span t-field="o.employee_id.company_id.zip"/>
                                </div>
                                <div><span t-field="o.employee_id.company_id.country_id"/></div>
                            
                            </th>
                            <td style="border: 1px solid black">
                                <div>
                                    <span>Employee:<span t-field="o.employee_id.name"/></span><br/>
                                    <span>Job Title:<span t-field="o.employee_id.job_id.name"/></span><br/>
                                    <span>Division / Department / Section:<span t-field="o.employee_id.department_id.name"/></span><br/>
                                    <span>NRC Number:<span t-field="o.employee_id.identification_id"/></span><br/>
                                    <span>Date of Arrival:</span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">
                                <div>
                                    <span>Address:
                                    <div>
                                        <span t-field="o.employee_id.company_id.city"/>
                                        <span t-field="o.employee_id.company_id.state_id"/>
                                        <span t-field="o.employee_id.company_id.zip"/>
                                    </div>
                                    </span><br/>
                                </div>
                            </td>
                        </tr>
                    </table>
                    <div>
                        <span>Bank:<span t-field="o.employee_id.bank_account_id.bank_id.name"/></span><br/>
                        <span>Account Number:<span t-field="o.employee_id.bank_account_id.acc_number"/></span><br/>
                        <span>Month:<span t-field="o.date_from"/> to <span t-field="o.date_to"/></span><br/>
                    </div>
                    <table class="table table-sm o_main_table">
                        <thead>
                            <tr>
                                <th name="th_elem" style="border: 1px solid black" class="text-left">Elem</th>
                                <th name="th_title" style="border: 1px solid black" class="text-left"><span>Title</span></th>
                                <th name="th_base"  style="border: 1px solid black" class="text-right"><span>Base</span></th>
                                <th name="th_rate"  style="border: 1px solid black" class="text-right"><span>Rate</span></th>
                                <th name="th_pay"  style="border: 1px solid black" class="text-right"><span>To Pay</span></th>
                                <th name="th_deduct"  style="border: 1px solid black" class="text-right"><span>Deduction</span></th>
                            </tr>
                        </thead>
                        <tbody class="payslip_tbody">
                            <t t-foreach="o.line_ids" t-as="line">
                                <tr>
                                    <td name="td_index" style="border: 1px solid black"><span t-esc="line_index+1"/></td>
                                    <td name="td_name" style="border: 1px solid black"><span t-field="line.name"/></td>
                                    <td name="td_amount" style="border: 1px solid black"><span t-field="line.amount"/></td>
                                    <td name="td_rate" style="border: 1px solid black"><span t-field="line.rate"/></td>
                                    <td name="td_pay"  style="border: 1px solid black"><t t-if="line.category_id.code in ('BASIC','ALW')"><span  t-field="line.amount"/></t></td>
                                    <td name="td_deduction" style="border: 1px solid black"><t t-if="line.category_id.code in ('DED')"><span t-field="line.amount"/></t></td>
                                </tr>
                                
                            </t>
                            <tr>
                                <th name="th_elem" style="border: 1px solid black" class="text-left"></th>
                                <th name="th_title" style="border: 1px solid black" class="text-left"><span></span></th>
                                <th name="th_base"  style="border: 1px solid black" class="text-right"><span></span></th>
                                <th name="th_rate"  style="border: 1px solid black" class="text-right"><span></span></th>
                                <th name="th_pay"  style="border: 1px solid black" class="text-right"><span></span></th>
                                <th name="th_deduct"  style="border: 1px solid black" class="text-right"><span></span></th>
                            </tr>
                        </tbody>
                        
                    </table>
                    <div t-attf-class="#{'col-6' if report_type != 'html' else 'col-sm-7 col-md-6'} ml-auto">
                        <table class="table table-sm" style="page-break-inside: avoid;">
                            <t t-foreach="o.line_ids" t-as="line">
                                <t t-if="line.category_id.code in ('GROSS')">
                                    <tr class="border-black o_net" style="">
                                        <td style="border: 1px solid black"><strong>Net to Pay</strong></td>
                                        <td class="text-right" style="border: 1px solid black">
                                            <span  t-field="line.amount"/>
                                        </td>
                                        <td style="border: 1px solid black"><strong><span t-esc="o.employee_id.company_id.currency_id.name"/></strong></td>
                                    </tr>
                                </t>
                            </t>
                        </table>
                    </div>
                    <table class="table table-sm o_main_table">
                        <tr>
                            <td>Gross of the fiscal year:</td>
                            <td><span t-esc="o.gross_fiscal_year()"/></td>
                            <td>Net paid on the fiscal year :</td>
                            <td><span t-esc="o.net_fiscal_year()"/></td>
                        </tr>
                        <tr>
                            <td>Taxable income of the fiscal year:</td>
                            <td><span t-esc="o.income_tax_fiscal_year()"/></td>
                            <td>Total income tax paid for the fiscal year:</td>
                            <td><span t-esc="o.income_tax_fiscal_year()"/></td>
                        </tr>
                    </table>
                    <table class="table table-sm o_main_table">
                        <tr>
                            <th style="border: 1px solid black"></th>
                            <th style="border: 1px solid black">Previous balance</th>
                            <th style="border: 1px solid black">Accured</th>
                            <th style="border: 1px solid black">Taken</th>
                            <th style="border: 1px solid black">New Balance</th>
                        </tr>
                        <!-- <tr>
                            <td style="border: 1px solid black">Annual leaves previous year</td>
                            <td style="border: 1px solid black"><span t-esc="o.anaual_leave_previous()"/></td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black"><span t-esc="o.calculate_taken_anaual_leave()"/></td>
                            <td style="border: 1px solid black"><span t-esc="o.anaual_leave_previous()-o.calculate_taken_anaual_leave()"/></td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Annual leaves current year</td>
                            <td style="border: 1px solid black"><span t-esc="o.anaual_leave_current()"/></td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black"><span t-esc="o.calculate_taken_anaual_leave_current()"/></td>
                            <td style="border: 1px solid black"><span t-esc="o.anaual_leave_current()-o.calculate_taken_anaual_leave_current()"/></td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Recuperation days</td>
                            <td style="border: 1px solid black"><span t-esc="o.recuperation_days()"/></td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black"><span t-esc="o.calculate_taken_recuperation()"/></td>
                            <td style="border: 1px solid black"><span t-esc="o.recuperation_days()-o.calculate_taken_recuperation()"/></td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Casual days</td>
                            <td style="border: 1px solid black"><span t-esc="o.casual_days()"/></td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black"><span t-esc="o.calculate_taken_casual()"/></td>
                            <td style="border: 1px solid black"><span t-esc="o.casual_days()-o.calculate_taken_casual()"/></td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Ext. Work. Hours in days</td>
                            <td style="border: 1px solid black"><span t-esc="o.ext_work_hr()"/></td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black"><span t-esc="o.calculate_taken_ext_work()"/></td>
                            <td style="border: 1px solid black"><span t-esc="o.ext_work_hr()-o.calculate_taken_ext_work()"/></td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Short term Recuperation days</td>
                            <td style="border: 1px solid black"><span t-esc="o.short_recuperation_days()"/></td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black"><span t-esc="o.calculate_taken_short_recuperation()"/></td>
                            <td style="border: 1px solid black"><span t-esc="o.short_recuperation_days()-o.calculate_taken_short_recuperation()"/></td>
                        </tr> -->
                        <tr>
                            <td style="border: 1px solid black">Annual leaves previous year</td>
                            <td style="border: 1px solid black">8.10</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">8.10</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Annual leaves current year</td>
                            <td style="border: 1px solid black">23.53</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">23.53</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Recuperation days</td>
                            <td style="border: 1px solid black">54.00</td>
                            <td style="border: 1px solid black">1.00</td>
                            <td style="border: 1px solid black">73.00</td>
                            <td style="border: 1px solid black">-18.00</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Casual days</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Ext. Work. Hours in days</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black">Short term Recuperation days</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                            <td style="border: 1px solid black">0.00</td>
                        </tr>
                    </table>
                </div>
            </t>
        </t>
    </t>
    
</template>

</odoo>

